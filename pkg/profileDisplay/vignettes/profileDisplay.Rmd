<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{The profileDisplay package}
-->

# The profileDisplay package

This vignette is a short illustration of the profileDisplay package.
This package is designed to produce a visual display of profiling data.
There are functions to display the source code using different colors
for different amounts of run-time or memory use, or just to indicate
which lines have been executed for coverage analysis of tests.

There are also functions to create scripts from the examples in a 
package, and to run scripts multiple times to generate sufficiently
informative profile data.

# A Simple Example

The steps involved in producing a profile display are:

1. Produce the script.
2. Run the script while profiling is active.
3. Classify the source lines according to some aspect of the profile data.
4. Display the source lines in an HTML page.

The profileDisplay package can help with each of these steps.

## Producing the script

For now, we'll use a simple script:
```{r script}
cat(readLines("script.R"), sep="\n")
```


## Running the script

```{r running}
filename <- tempfile()
Rprof(filename = filename, line.profiling = TRUE)
for (j in 1:50)
  source("script.R", keep.source = TRUE)
Rprof(NULL)
```

## Classifying the source lines

Based on the summaryRprof output

```{r}
summaryRprof(filename = filename, lines = "show")
```

we can classify the lines according to run-time on each.

## Displaying the lines